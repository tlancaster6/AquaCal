# Module Dependency Graph
#
# Usage:
#   - "depends_on" lists modules that must be read to understand this module
#   - "status" is one of: not_started, stub, in_progress, implemented
#
# Query example (find what to read for a module):
#   grep -A 10 "^  core/camera.py:" DEPENDENCIES.yaml

modules:

  # === Config ===
  config/schema.py:
    depends_on: []
    status: not_started
    description: Type definitions, dataclasses, configuration schema

  # === Utils ===
  utils/transforms.py:
    depends_on: []
    status: not_started
    description: Rotation conversions, pose composition

  utils/visualization.py:
    depends_on:
      - config/schema.py
    status: not_started
    description: Plotting utilities for debugging

  # === Core ===
  core/board.py:
    depends_on:
      - config/schema.py
    status: not_started
    description: ChArUco board geometry and 3D point generation

  core/camera.py:
    depends_on:
      - config/schema.py
      - utils/transforms.py
    status: not_started
    description: Camera model, projection, back-projection (no refraction)

  core/interface.py:
    depends_on:
      - config/schema.py
    status: not_started
    description: Refractive interface model, ray-plane intersection

  core/refractive_geometry.py:
    depends_on:
      - config/schema.py
      - core/camera.py
      - core/interface.py
    status: not_started
    description: Snell's law, ray tracing, refractive projection

  # === IO ===
  io/video.py:
    depends_on: []
    status: not_started
    description: Video loading, frame extraction

  io/detection.py:
    depends_on:
      - config/schema.py
      - core/board.py
    status: not_started
    description: ChArUco detection wrapper

  io/serialization.py:
    depends_on:
      - config/schema.py
    status: not_started
    description: Save/load calibration results

  # === Calibration ===
  calibration/intrinsics.py:
    depends_on:
      - config/schema.py
      - core/camera.py
      - core/board.py
      - io/detection.py
    status: not_started
    description: Stage 1 - per-camera intrinsic calibration

  calibration/extrinsics.py:
    depends_on:
      - config/schema.py
      - core/camera.py
      - core/board.py
      - io/detection.py
      - utils/transforms.py
    status: not_started
    description: Stage 2 - extrinsic initialization via pose graph

  calibration/interface.py:
    depends_on:
      - config/schema.py
      - core/camera.py
      - core/interface.py
      - core/refractive_geometry.py
      - core/board.py
    status: not_started
    description: Stage 3 - interface and board pose optimization

  calibration/refinement.py:
    depends_on:
      - config/schema.py
      - calibration/interface.py
    status: not_started
    description: Stage 4 - optional joint refinement

  calibration/pipeline.py:
    depends_on:
      - config/schema.py
      - io/video.py
      - io/detection.py
      - io/serialization.py
      - calibration/intrinsics.py
      - calibration/extrinsics.py
      - calibration/interface.py
      - calibration/refinement.py
      - validation/reprojection.py
      - validation/reconstruction.py
    status: not_started
    description: End-to-end calibration orchestration

  # === Triangulation ===
  triangulation/triangulate.py:
    depends_on:
      - config/schema.py
      - core/refractive_geometry.py
    status: not_started
    description: Refractive triangulation for 3D reconstruction

  # === Validation ===
  validation/reprojection.py:
    depends_on:
      - config/schema.py
      - core/refractive_geometry.py
    status: not_started
    description: Reprojection error computation

  validation/reconstruction.py:
    depends_on:
      - config/schema.py
      - triangulation/triangulate.py
      - core/board.py
    status: not_started
    description: 3D reconstruction metrics using ChArUco geometry

  validation/diagnostics.py:
    depends_on:
      - config/schema.py
      - validation/reprojection.py
      - validation/reconstruction.py
    status: not_started
    description: Detailed error analysis and reporting
