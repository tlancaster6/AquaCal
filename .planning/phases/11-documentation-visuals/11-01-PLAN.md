---
phase: 11-documentation-visuals
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/_static/scripts/style_guide.md
  - docs/_static/scripts/palette.py
  - docs/_static/scripts/hero_image.py
  - docs/_static/hero_ray_trace.png
  - docs/guide/_diagrams/ray_trace.py
  - docs/guide/_diagrams/coordinate_frames.py
  - docs/guide/_diagrams/generate_all.py
  - docs/_static/diagrams/ray_trace.png
  - docs/_static/diagrams/coordinate_frames.png
autonomous: true

must_haves:
  truths:
    - "Hero image shows multi-camera array with refractive rays bending at water surface"
    - "All matplotlib diagrams use a consistent blue/aqua color palette"
    - "Style guide documents the shared palette for portability to other projects"
  artifacts:
    - path: "docs/_static/scripts/style_guide.md"
      provides: "Color palette reference for all AquaCal visuals"
      contains: "hex"
    - path: "docs/_static/scripts/palette.py"
      provides: "Shared Python color constants importable by all diagram scripts"
      contains: "WATER"
    - path: "docs/_static/scripts/hero_image.py"
      provides: "Generation script for hero image"
      contains: "def generate"
    - path: "docs/_static/hero_ray_trace.png"
      provides: "Hero image for README and documentation landing page"
  key_links:
    - from: "docs/_static/scripts/hero_image.py"
      to: "docs/_static/hero_ray_trace.png"
      via: "plt.savefig output"
    - from: "docs/guide/_diagrams/ray_trace.py"
      to: "docs/_static/scripts/palette.py"
      via: "import palette colors"
    - from: "docs/guide/_diagrams/coordinate_frames.py"
      to: "docs/_static/scripts/palette.py"
      via: "import palette colors"
---

<objective>
Create the visual foundation for AquaCal documentation: a shared color palette, a new hero image, and updated existing diagrams matching the palette.

Purpose: Establish consistent visual identity (blue/aqua theme) across all documentation visuals and create a compelling hero image that communicates "multi-camera refractive calibration" at a glance.

Output: Style guide markdown, palette Python module, hero image PNG, updated coordinate_frames.png and ray_trace.png.
</objective>

<execution_context>
@C:/Users/tucke/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/tucke/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-documentation-visuals/11-CONTEXT.md
@docs/guide/_diagrams/ray_trace.py
@docs/guide/_diagrams/coordinate_frames.py
@docs/guide/_diagrams/generate_all.py
@docs/conf.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create style guide and palette module, generate new hero image</name>
  <files>
    docs/_static/scripts/style_guide.md
    docs/_static/scripts/palette.py
    docs/_static/scripts/hero_image.py
    docs/_static/hero_ray_trace.png
  </files>
  <action>
Create `docs/_static/scripts/` directory (it does not yet exist).

**palette.py** — Shared color constants for all AquaCal diagrams. Define a blue/aqua theme:
- `WATER_SURFACE`: Light aqua/cyan for water surface plane (e.g., `#4DD0E1` or similar)
- `WATER_FILL`: Transparent aqua for underwater regions (lighter, with alpha)
- `AIR_FILL`: Very light sky blue for air region above water
- `CAMERA_COLOR`: Warm dark gray or charcoal (e.g., `#37474F`) for camera bodies
- `RAY_AIR`: Warm red/orange for ray segments in air (e.g., `#FF7043`)
- `RAY_WATER`: Deep teal/blue for ray segments in water (e.g., `#00897B`)
- `BOARD_COLOR`: Warm amber/gold for calibration board (e.g., `#FFB300`)
- `INTERFACE_POINT`: Bright magenta or pink for refraction point (e.g., `#E91E63`)
- `AXIS_X`, `AXIS_Y`, `AXIS_Z`: Red, green, blue for coordinate axes (standard convention)
- `LABEL_COLOR`: Dark blue-gray for text labels
- `GRID_COLOR`: Light gray for grid lines
- Include a docstring explaining the palette is for AquaCal documentation visuals.

**style_guide.md** — Human-readable reference documenting the palette:
- Color swatches table (name, hex, usage)
- Typography notes (matplotlib defaults are fine)
- Brief rationale ("blue/aqua theme matching AquaCal water-optics domain")
- Note that this is portable to related projects

**hero_image.py** — Generation script for the hero image. Per user decisions:
- 2D cross-section (not 3D) showing **3 cameras** above water surface
- Rays from each camera bending at the water interface (Snell's law refraction)
- Calibration board below the water surface
- Minimal labels only: "Camera", "Water surface", "Board" (no equations, no angle annotations)
- Must convey "multi-camera array" + "refractive calibration" at a glance
- Polished matplotlib style: clean axes, professional appearance
- Use colors from palette.py (import it via sys.path manipulation)
- Import `snells_law_3d` from `aquacal.core.refractive_geometry` to compute actual refraction points (same approach as existing ray_trace.py)
- Save to `docs/_static/hero_ray_trace.png` at 150 DPI, targeting ~1200x500px (wide/landscape for README)
- Include `def generate(output_path)` function signature for scriptability
- The image replaces the current hero_ray_trace.png (same filename)

Layout guidance for the hero image:
- Cameras at different X positions along top (Z near 0), with slight spacing
- Water surface as a horizontal band/line at Z = water_z
- Board tilted slightly at the bottom (Z > water_z)
- Each camera has a ray going down to the board, bending at the water surface
- Light blue/aqua background below water, white/light above
- Camera icons can be simple triangles or trapezoids pointing downward

Run the hero_image.py script to generate the PNG:
```bash
cd docs/_static/scripts && python hero_image.py
```

Verify the PNG was created and has reasonable size (> 10KB, < 500KB).
  </action>
  <verify>
```bash
python docs/_static/scripts/hero_image.py
ls -la docs/_static/hero_ray_trace.png
python -c "from docs._static.scripts.palette import *; print('Palette loaded OK')" 2>/dev/null || python -c "import sys; sys.path.insert(0, 'docs/_static/scripts'); from palette import *; print('Palette loaded OK')"
```
  </verify>
  <done>Hero image PNG exists at docs/_static/hero_ray_trace.png showing 3 cameras with refractive rays. palette.py and style_guide.md exist in docs/_static/scripts/.</done>
</task>

<task type="auto">
  <name>Task 2: Update existing diagrams to use shared palette</name>
  <files>
    docs/guide/_diagrams/ray_trace.py
    docs/guide/_diagrams/coordinate_frames.py
    docs/guide/_diagrams/generate_all.py
    docs/_static/diagrams/ray_trace.png
    docs/_static/diagrams/coordinate_frames.png
  </files>
  <action>
Update both existing diagram generation scripts to import and use colors from `docs/_static/scripts/palette.py`.

**ray_trace.py** changes:
- Add `sys.path.insert` to include `docs/_static/scripts/` (use Path-based resolution like the existing project_root pattern)
- Import color constants from `palette`
- Replace hardcoded colors with palette constants:
  - Ray in air segment → `RAY_AIR`
  - Ray in water segment → `RAY_WATER`
  - Water surface line/fill → `WATER_SURFACE` / `WATER_FILL`
  - Interface point → `INTERFACE_POINT`
  - Camera marker → `CAMERA_COLOR`
  - Target marker → `BOARD_COLOR`
  - Air region fill → `AIR_FILL`
- Keep all existing functionality (Snell's law computation, labels, annotations, layout) unchanged
- Keep existing annotations (angle labels, Snell's equation box, normal vector) — only colors change

**coordinate_frames.py** changes:
- Same sys.path.insert for palette import
- Replace hardcoded colors:
  - X/Y/Z axes → `AXIS_X`, `AXIS_Y`, `AXIS_Z`
  - Water surface → `WATER_SURFACE`
  - Camera markers → `CAMERA_COLOR`
  - Target markers → `BOARD_COLOR`
  - Labels → `LABEL_COLOR`
- Keep all existing 3D layout, annotations, and functionality unchanged

**generate_all.py** — No changes needed yet (hero_image.py has its own standalone runner; generate_all.py will be updated in Plan 02 to add new diagrams).

After updating both scripts, regenerate the diagrams:
```bash
cd docs/guide/_diagrams && python generate_all.py
```

Verify both PNGs were regenerated and have reasonable file sizes.
  </action>
  <verify>
```bash
cd docs/guide/_diagrams && python generate_all.py
ls -la docs/_static/diagrams/ray_trace.png docs/_static/diagrams/coordinate_frames.png
```
Both PNGs regenerated without errors.
  </verify>
  <done>ray_trace.png and coordinate_frames.png regenerated with consistent blue/aqua palette from palette.py. Visual content unchanged, only colors updated.</done>
</task>

</tasks>

<verification>
- `docs/_static/scripts/palette.py` exists and defines all color constants
- `docs/_static/scripts/style_guide.md` exists and documents the palette
- `docs/_static/scripts/hero_image.py` exists and generates a hero image
- `docs/_static/hero_ray_trace.png` exists (> 10KB) showing 3-camera refractive scene
- `docs/_static/diagrams/ray_trace.png` regenerated with palette colors
- `docs/_static/diagrams/coordinate_frames.png` regenerated with palette colors
- All scripts run without errors: `python docs/_static/scripts/hero_image.py` and `python docs/guide/_diagrams/generate_all.py`
</verification>

<success_criteria>
All documentation visuals use a consistent blue/aqua color palette. A professional hero image showing multi-camera refractive calibration replaces the old single-ray diagram. Style guide documents the palette for portability.
</success_criteria>

<output>
After completion, create `.planning/phases/11-documentation-visuals/11-01-SUMMARY.md`
</output>
