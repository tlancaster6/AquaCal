---
phase: 01-foundation-and-cleanup
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - pyproject.toml
  - CHANGELOG.md
  - CONTRIBUTING.md
  - .gitignore
autonomous: true

must_haves:
  truths:
    - "pyproject.toml has complete PyPI metadata (project.urls, classifiers, description)"
    - "CHANGELOG.md exists at repo root following Keep a Changelog format"
    - "CONTRIBUTING.md exists with development setup and deprecation policy"
    - ".gitignore no longer ignores dev/ (directory removed in Plan 01)"
  artifacts:
    - path: "pyproject.toml"
      provides: "Complete package metadata for PyPI"
      contains: "project.urls"
    - path: "CHANGELOG.md"
      provides: "Keep a Changelog formatted changelog"
      contains: "Unreleased"
    - path: "CONTRIBUTING.md"
      provides: "Contributor guide with deprecation policy"
      contains: "Deprecation Policy"
  key_links:
    - from: "pyproject.toml"
      to: "CHANGELOG.md"
      via: "project.urls.Changelog"
      pattern: "Changelog.*CHANGELOG\\.md"
---

<objective>
Complete package metadata in pyproject.toml and create CHANGELOG.md and CONTRIBUTING.md files.

Purpose: Satisfy PKG-02 (changelog), PKG-03 (metadata), and success criteria for deprecation policy in CONTRIBUTING.md. These files are needed before any PyPI upload.
Output: Updated pyproject.toml, new CHANGELOG.md, new CONTRIBUTING.md, cleaned .gitignore.
</objective>

<execution_context>
@C:/Users/tucke/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/tucke/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-and-cleanup/01-RESEARCH.md
@.planning/phases/01-foundation-and-cleanup/01-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update pyproject.toml metadata and clean .gitignore</name>
  <files>
    pyproject.toml
    .gitignore
  </files>
  <action>
    **Update pyproject.toml `[project]` section:**
    - Change `description` to: `"Refractive multi-camera calibration for underwater arrays with Snell's law modeling"`
    - Change `"Development Status :: 3 - Alpha"` to `"Development Status :: 4 - Beta"`
    - Add classifier: `"Intended Audience :: Developers"`
    - Add classifier: `"Topic :: Scientific/Engineering"` (broader category)
    - Add classifier: `"Topic :: Scientific/Engineering :: Image Processing"`
    - Keep existing classifiers that are correct

    **Update `[project.urls]` section** (currently only has Repository):
    - Add: `Homepage = "https://github.com/tlancaster6/AquaCal"`
    - Add: `Documentation = "https://aquacal.readthedocs.io"` (Phase 3 will create this)
    - Add: `Issues = "https://github.com/tlancaster6/AquaCal/issues"`
    - Add: `Changelog = "https://github.com/tlancaster6/AquaCal/blob/main/CHANGELOG.md"`
    - Keep: `Repository = "https://github.com/tlancaster6/AquaCal"`

    **Dependency pinning** (Claude's discretion -- use research library conventions):
    - Keep current dependencies as-is (no upper bounds, only `opencv-python>=4.6` lower bound). This is already correct per research findings.

    **Clean .gitignore:**
    - Remove the `dev/` line from the "Project-specific" section (dev/ directory no longer exists)
    - Keep `.claude/` in .gitignore (still valid -- GSD config is local)
    - Keep `CLAUDE.md` in .gitignore (still valid -- project instructions are local)
    - Keep `tmp/` in .gitignore
    - Do NOT add `results/` to .gitignore (per user decision)
  </action>
  <verify>
    - `python -c "import tomllib; d=tomllib.load(open('pyproject.toml','rb')); print(d['project']['urls'])"` shows all 5 URL keys
    - `python -c "import tomllib; d=tomllib.load(open('pyproject.toml','rb')); print([c for c in d['project']['classifiers'] if 'Beta' in c])"` shows Beta status
    - `grep "dev/" .gitignore` returns no results
  </verify>
  <done>pyproject.toml has complete PyPI metadata with all 5 project URLs and correct classifiers. .gitignore no longer references dev/.</done>
</task>

<task type="auto">
  <name>Task 2: Create CHANGELOG.md and CONTRIBUTING.md</name>
  <files>
    CHANGELOG.md
    CONTRIBUTING.md
  </files>
  <action>
    **Create `CHANGELOG.md`** at repo root following Keep a Changelog 1.1.0 format:
    - Header: "# Changelog" with format attribution and SemVer adherence note
    - `## [Unreleased]` section with:
      - **Added**: List the major features that exist in the codebase now (refractive multi-camera calibration pipeline, Snell's law projection modeling, ChArUco board detection and pose estimation, BFS-based extrinsic initialization, joint refractive bundle adjustment, optional intrinsic refinement stage, sparse Jacobian optimization, CLI interface)
    - No dated release sections yet (v1.0.0 will be added in Phase 6)
    - Use ISO 8601 dates when dates are needed

    **Create `CONTRIBUTING.md`** at repo root:
    - **Development Setup** section: clone, create venv, `pip install -e ".[dev]"`, run tests with `python -m pytest tests/`
    - **Code Style** section: Black formatter, Google-style docstrings, type hints with numpy.typing.NDArray, imports ordering (stdlib, third-party, local)
    - **Running Tests** section: all tests command, skip slow tests command, single file command
    - **Submitting Changes** section: fork, branch, test, PR basics
    - **Deprecation Policy** section (required by success criteria):
      1. Add `warnings.warn()` with `DeprecationWarning`, include version deprecated and removal version
      2. Document in CHANGELOG.md under "Deprecated" category
      3. Maintain deprecated API for at least 2 minor versions
      4. Document replacement in function docstring
      5. Include code example showing the warning pattern with `stacklevel=2`
    - Keep it concise -- this is a research library, not an enterprise project
  </action>
  <verify>
    - `head -5 CHANGELOG.md` shows "# Changelog" header
    - `grep "Unreleased" CHANGELOG.md` finds the unreleased section
    - `grep "Keep a Changelog" CHANGELOG.md` finds format attribution
    - `grep "Deprecation Policy" CONTRIBUTING.md` finds the section
    - `grep "DeprecationWarning" CONTRIBUTING.md` finds the warning pattern
    - `grep "pip install" CONTRIBUTING.md` finds dev setup instructions
  </verify>
  <done>CHANGELOG.md follows Keep a Changelog format with Unreleased section listing existing features. CONTRIBUTING.md has dev setup, code style, and deprecation policy.</done>
</task>

</tasks>

<verification>
- `python -m build --sdist --no-isolation 2>&1 | tail -5` succeeds (package builds with new metadata)
- All 5 project URLs present in pyproject.toml
- CHANGELOG.md and CONTRIBUTING.md exist at repo root
- CONTRIBUTING.md contains deprecation policy with DeprecationWarning example
- .gitignore has no dev/ reference
</verification>

<success_criteria>
- PKG-02: CHANGELOG.md exists following Keep a Changelog format
- PKG-03: Package metadata (description, classifiers, URLs) is complete
- Success criterion 5: Deprecation policy documented in CONTRIBUTING.md
- .gitignore cleaned of stale references
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-and-cleanup/01-02-SUMMARY.md`
</output>
