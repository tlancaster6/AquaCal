---
phase: 01-foundation-and-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/architecture.md
  - .planning/geometry.md
  - .planning/knowledge-base.md
  - .claude/agents/executor.md
  - .claude/agents/planner.md
  - .claude/agents/tasker.md
  - .claude/agents/debugger.md
  - .claude/agents/claude-expert.md
  - .claude/hooks/protect_tasks.py
  - .claude/hooks/auto_format.py
  - .claude/rules/knowledge-base.md
  - .claude/rules/workflow.md
  - .claude/settings.local.json
  - CLAUDE.md
  - dev/
autonomous: true

must_haves:
  truths:
    - "Repository contains no dev/ directory"
    - "Architecture docs (DESIGN.md, GEOMETRY.md, KNOWLEDGE_BASE.md) are preserved in .planning/"
    - ".claude/ contains no pre-GSD agent specs (executor, planner, tasker, debugger, claude-expert)"
    - ".claude/settings.local.json has no overly restrictive permissions blocking GSD workflow"
    - "CLAUDE.md references .planning/ paths instead of dev/ paths"
  artifacts:
    - path: ".planning/architecture.md"
      provides: "Migrated architecture design doc"
      contains: "Four-stage calibration pipeline"
    - path: ".planning/geometry.md"
      provides: "Migrated geometry reference doc"
      contains: "Coordinate System"
    - path: ".planning/knowledge-base.md"
      provides: "Migrated knowledge base"
      contains: "Lessons Learned"
  key_links:
    - from: "CLAUDE.md"
      to: ".planning/architecture.md"
      via: "Key Reference Files table"
      pattern: "\\.planning/architecture\\.md"
---

<objective>
Clean repository of legacy dev artifacts and pre-GSD agent infrastructure, migrating useful documentation to .planning/.

Purpose: Satisfy CLEAN-01 and CLEAN-02 -- remove legacy artifacts that would confuse external contributors or GSD agents, while preserving valuable architecture and geometry documentation.
Output: Clean repository with dev/ removed, .claude/ streamlined, CLAUDE.md updated.
</objective>

<execution_context>
@C:/Users/tucke/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/tucke/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-and-cleanup/01-RESEARCH.md
@.planning/phases/01-foundation-and-cleanup/01-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate dev/ documentation to .planning/ and delete dev/</name>
  <files>
    .planning/architecture.md
    .planning/geometry.md
    .planning/knowledge-base.md
    dev/ (deleted)
  </files>
  <action>
    1. Copy `dev/DESIGN.md` to `.planning/architecture.md` (preserve content exactly, per user decision)
    2. Copy `dev/GEOMETRY.md` to `.planning/geometry.md` (preserve content exactly)
    3. Copy `dev/KNOWLEDGE_BASE.md` to `.planning/knowledge-base.md` (preserve content exactly)
    4. Delete the entire `dev/` directory including:
       - `dev/CHANGELOG.md` (discard -- GSD workflow replaces this)
       - `dev/TASKS.md` (discard)
       - `dev/tasks/` and `dev/tasks/archive/` (discard)
       - `dev/handoffs/` (discard)
       - `dev/tmp/` (discard)
    5. Do NOT touch `results/` folder (user decision: leave as-is)

    Use `git rm -r dev/` to properly track the deletion, then `git add` the new .planning/ files.
  </action>
  <verify>
    - `ls .planning/architecture.md .planning/geometry.md .planning/knowledge-base.md` succeeds
    - `ls dev/` fails (directory gone)
    - `grep "Four-stage" .planning/architecture.md` finds content
    - `ls results/` still exists (untouched)
  </verify>
  <done>dev/ is fully removed, three documentation files preserved in .planning/</done>
</task>

<task type="auto">
  <name>Task 2: Clean .claude/ directory and update CLAUDE.md</name>
  <files>
    .claude/agents/ (all 5 agent files deleted)
    .claude/hooks/protect_tasks.py (deleted)
    .claude/hooks/auto_format.py (deleted)
    .claude/rules/knowledge-base.md (deleted)
    .claude/rules/workflow.md (updated)
    .claude/settings.local.json (updated)
    CLAUDE.md
  </files>
  <action>
    **Delete pre-GSD agent specs** (per user decision: "remove confusing workflows, unneeded agent specs"):
    - Delete `.claude/agents/executor.md`
    - Delete `.claude/agents/planner.md`
    - Delete `.claude/agents/tasker.md`
    - Delete `.claude/agents/debugger.md`
    - Delete `.claude/agents/claude-expert.md`
    - If agents/ directory is empty after deletion, remove it too.

    **Delete pre-GSD hooks** (these enforce the old dev/TASKS.md workflow):
    - Delete `.claude/hooks/protect_tasks.py` (protects dev/TASKS.md which no longer exists)
    - Delete `.claude/hooks/auto_format.py` (auto-formats on write -- not needed with GSD)
    - If hooks/ directory is empty after deletion, remove it too.

    **Delete pre-GSD rules that reference removed files:**
    - Delete `.claude/rules/knowledge-base.md` (references `dev/KNOWLEDGE_BASE.md` which no longer exists)

    **Update `.claude/rules/workflow.md`:**
    - Remove the "Agents" section and agent table (agents are deleted)
    - Remove the "Dev Directory" section and file table (dev/ is deleted)
    - Remove "Task File Conventions" section (dev/tasks/ is deleted)
    - Remove "Global Rules" that reference dev/TASKS.md, dev/CHANGELOG.md, dev/KNOWLEDGE_BASE.md
    - Keep code-style.md and source-code.md rules as-is (still valid)

    **Update `.claude/settings.local.json`:**
    - Remove the overly restrictive `permissions` block (both `allow` and `deny` lists). These were designed for the old agent workflow and block normal GSD operations (e.g., `pip install` is denied, `git add/commit` not allowed). Replace with minimal permissions or empty permissions object.
    - Remove the `hooks` block (hooks files are deleted).
    - Result should be a minimal JSON: `{}` or with only essential settings.

    **Update `CLAUDE.md`:**
    - Update "Key Reference Files" table: change `dev/DESIGN.md` to `.planning/architecture.md`, `dev/GEOMETRY.md` to `.planning/geometry.md`, `dev/KNOWLEDGE_BASE.md` to `.planning/knowledge-base.md`
    - Remove any references to `dev/TASKS.md`, `dev/CHANGELOG.md`, `dev/handoffs/`, or `dev/tasks/`
    - Remove the "Architecture" section reference to "See `dev/DESIGN.md`" -- update to `.planning/architecture.md`
    - Keep domain conventions, coordinate system, units, testing, and common commands sections (still valid)
    - Keep `.claude/rules/code-style.md` and `.claude/rules/source-code.md` references if present (still valid)
  </action>
  <verify>
    - `ls .claude/agents/` fails or is empty (agents removed)
    - `ls .claude/hooks/` fails or is empty (hooks removed)
    - `cat .claude/settings.local.json` shows minimal config without restrictive permissions
    - `grep "dev/" CLAUDE.md` returns no hits (all dev/ references updated)
    - `grep ".planning/architecture.md" CLAUDE.md` finds the updated reference
    - `cat .claude/rules/workflow.md` contains no references to dev/TASKS.md or agents
  </verify>
  <done>.claude/ contains only GSD-compatible infrastructure, CLAUDE.md references .planning/ paths</done>
</task>

</tasks>

<verification>
- `ls dev/` fails (deleted)
- `ls .planning/architecture.md .planning/geometry.md .planning/knowledge-base.md` all exist
- `ls .claude/agents/` empty or gone
- `grep -r "dev/DESIGN\|dev/GEOMETRY\|dev/KNOWLEDGE_BASE\|dev/TASKS\|dev/CHANGELOG" CLAUDE.md .claude/` returns no results
- `results/` directory is untouched
</verification>

<success_criteria>
- Repository has no dev/ directory
- Architecture, geometry, and knowledge base docs are preserved in .planning/
- .claude/ has no pre-GSD agents, hooks, or restrictive permissions
- CLAUDE.md references .planning/ paths, not dev/ paths
- CLEAN-01 and CLEAN-02 requirements satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-and-cleanup/01-01-SUMMARY.md`
</output>
